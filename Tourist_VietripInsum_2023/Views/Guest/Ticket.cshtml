@model Tourist_VietripInsum_2023.Models.Ve
@using Tourist_VietripInsum_2023.Models
@{
    ViewBag.Title = "Ticket";
    Layout = "~/Views/Guest/ViewGuest/Guest.cshtml";
    TouristEntities1 db = new TouristEntities1();
    KhachHang khachhang = Session["taikhoan"] as KhachHang;
}
<link href="~/Content/Guest/booktour.css" rel="stylesheet" />
@*<div class="dattour">
    <div class="flex-col flex-grow medium-text-center nav-main">
        <nav class="nav-links flex-row flex-row-center heading-font text-center strong h4 uppercase">
            <a href="https://nucuoimekong.com/gio-hang" class="current">	1.Nhập thông tin </a>
            <span class="divider hide-for-small"><i class="icon-angle-right"></i></span> >
            <a href="https://nucuoimekong.com/dat-tour" class="hide-for-small">	2.Thanh toán &amp; giao hàng </a> >
            <span class="divider hide-for-small"><i class="icon-angle-right"></i></span>
            <a href="#" class="no-click hide-for-small">	3.Hoàn tất đặt hàng </a>
        </nav>
    </div>*@
@{ 
    string matour = (string)Session["Matourchon"];
    var tour = db.Tours.Where(s => s.MaTour == matour).FirstOrDefault();
}
<section class="thongtindatve">
    <div class="container">
        <div class="col-12 top">
            <div class="detailtour">
                <div class="image-tour">
                    <img src="@tour.HinhMinhHoa_T" class="img-fluid" alt="image">
                </div>
                <div class="tour-content">
                    <p class="title" id="title">@tour.TenTour</p>
                    <div class="entry">
                        <div class="entry-inner">
                            <span>Mã Tour <b>@tour.MaTour</b></span>
                            <span>Khởi hành <b>@tour.NgayKhoihanh</b></span>
                            <span>Thời gian <b>@tour.SoNgay ngày</b></span>
                            <span>Nơi khởi hành <b>@tour.NgayKhoihanh</b></span>
                            <span>Số chỗ còn nhận <b>@ViewBag.chodamua</b></span>
                            @{ 
                                var a = String.Format("{0:0,0 vnđ}", @tour.GiaNguoiLon);
                                var b = String.Format("{0:0,0 vnđ}", @tour.GiaTreEm);
                            }
                            <span>Giá người lớn <b>@a</b></span>
                            <span>Giá trẻ em <b>@b</b></span>
                            <h6>Hạn chót đặt vé: @tour.HanChotDatVe</h6>
                        </div>
                    </div>
                </div>
                <!-- <div class="entry-mb d-lg-none">
            <div class="entry-inner">
            <span>Khởi hành <b>06/04/2023, TP. Hồ Chí Minh</b></span>
            <span>Số chỗ còn nhận <b>9</b></span>
            <span>Số ngày <b>4 ngày</b></span>
            </div>
            </div> -->
            </div>
        </div>


        @using (Html.BeginForm())
        {
            @Html.AntiForgeryToken()

            @Html.HiddenFor(model => Model.MaDH)
            @Html.HiddenFor(model => Model.MaVe)
    <div class="row">
        <div class="col-sm-8 left-lienlac">
            <h6 class="title-name">NHẬP THÔNG TIN VÉ</h6>
            <div class="ticket-tour">
                <div class="row" style="padding: 0 5px;">
                    <div class="change col-sm-5">
                        <div class="change-title">
                            <h4>Số lượng vé</h4>
                        </div>

                        <div class="change-number">
                            <icon class="fas fa-plus-circle" onclick="ThemVe()"></icon>
                            <span class="venguoilon" id="venguoilon">0</span>
                            <icon class="fas fa-minus-circle" onclick="xoaVe()"></icon>
                        </div>

                    </div>
                </div>
            </div>

            <!-- DAT VE -->
            <div class="ticket-customer">
                <div class="list">
                    <h3 class="title-name">Thông tin hành khách</h3>

                    @*<h4 class="typeper">Người lớn</h4>*@

                    <div id="datve">
                        @*<div class="ticket-info" id="nd0">
                            <div class="row" id="ListInfoAdult">
                                <div class="group-info-name col-sm-5">
                                    <span>Họ tên</span>
                                    <input class="form-control" name="Hoten_KH0" placeholder="Vui lòng nhập Họ tên" required="required" type="text" value="">

                                </div>
                                <div class="form-group col-md-2">
                                    <label class="control-label">Loại vé</label>
                                    <select class="form-control col-sm-12" id="MaLVe0" name="MaLVe0">
                                        <option value="">Chọn loại vé</option>
                                        <option value="TICKET01">Vé người lớn</option>
                                        <option value="TICKET02">Vé trẻ em</option>
                                    </select>
                                </div>
                                <div class="group-info-sex col-sm-2">
                                    <span>Giới tính</span>
                                    <select class="form-control col-sm-12" id="GioiTinh0" name="GioiTinh0">
                                        <option value="">Giới tính</option>
                                        <option value="Nam">Nam</option>
                                        <option value="Nữ">Nữ</option>
                                    </select>
                                </div>
                                <div class="group-info-birthday col-sm-2">
                                    <span>Ngày sinh</span>
                                    <input class="form-control text-box single-line" name="NgaySinh0" id="NgaySinh0" placeholder="Vui lòng nhập chọn ngày sinh"  type="date" value="">
                                </div>
                                <div class="group-info-note col-sm-11">
                                    <span>Lưu ý</span>
                                    <input class="form-control" name="LuuY0" id="LuuY0" placeholder="Nhập lưu ý"  type="text" value="">
                                </div>
                            </div>
                        </div>*@
                    </div>
                </div>
                <input name="soluongdat" id="soluongdat" style="visibility:hidden" />

            </div>
            </div>

        <!-- RIGHT -->
        <div class="col-sm-4 right-thongtin">
            <div class="price-tour">
                <h4 class="title-ticket">BẢNG VÉ</h4>
                <div class="detail-book-tour">
                    <table>
                        <tbody>
                            <tr>
                                <td>Người lớn</td>
                                <td class="t-price text-right" id="AdultPrice">
                                    1 x 4,390,000₫
                                </td>
                            </tr>
                            <tr>
                                <td>Trẻ em</td>
                                <td class="t-price text-right" id="ChildrenPrice">
                                    0₫
                                </td>
                            </tr>

                        </tbody>
                    </table>

                </div>
                <h4 class="title-ticket">THÔNG TIN ĐẶT VÉ</h4>
                <div class="detail-book-tour">
                    <table>
                        <tbody>
                            <tr>
                                <td>Người lớn</td>
                                <td class="t-price text-right" id="AdultPrice">
                                    1 x 4,390,000₫
                                </td>
                            </tr>
                            <tr>
                                <td>Trẻ em</td>
                                <td class="t-price text-right" id="ChildrenPrice">
                                    0₫
                                </td>
                            </tr>
                            <tr>
                                <td>Giảm giá</td>
                                <td class="t-price text-right" id="ChildrenPrice">
                                    0₫
                                </td>
                            </tr>
                            <tr id="promotiontitletotal" style="display:none">
                                <td>Tổng tiền</td>
                                <td class="t-price text-right" id="PromotionTotalPrice"></td>
                            </tr>

                            <tr class="total">
                                <td>Tổng cộng</td>
                                <td class="t-price text-right" id="TotalPrice">5,690,000₫</td>
                                <td class="t-price text-right" style="display: none;" id="TotalPricetemp">5890000</td>
                                <td class="t-price text-right" style="display: none;" id="TotalOptionPrice"> 0</td>
                            </tr>
                        </tbody>
                    </table>
                    <div>
                        @*<button class="btn btn-success btn-order" style="width:100% ">
                    Đặt ngay
                </button>*@
                        <div class="form-group">
                            <div class="col-md-offset-2 col-md-10">
                                <input type="submit" value="Create" class="btn btn-success btn-sm" />
                            </div>
                        </div>

                    </div>
                </div>


            </div>
            </div>
        </div>
   

                }
            </div>
  
</section>

<script>
    var i = 0;
    
    document.getElementById("soluongdat").value = tong;
    
    function ThemVe() {
        if (i < 5) {
            i++;
            var row = ` <div class="ticket-info" id="nd` + i + `">` +
                `<div class="row" id="ListInfoAdult">` +
                `<div class="group-info-name col-sm-5">` +
                ` <span>Họ tên</span>` +
                `<input class="form-control" name="Hoten_KH` + i + `" placeholder="Vui lòng nhập Họ tên" required="required" type="text" value="">` +
                `</div>` +
                `<div class="form-group col-md-2">` +
                `<label class="control-label">Loại vé</label>` +
                ` <select class="form-control col-sm-12" id="MaLVe' + i + '" name="MaLVe` + i + `">` +
                `<option value="">Chọn loại vé</option>` +
                ` <option value="TICKET01">Vé người lớn</option>` +
                `<option value="TICKET02">Vé trẻ em</option>` +
                ` </select>` +
                ` </div>` +
                ` <div class="group-info-sex col-sm-2">` +
                `<span>Giới tính</span>` +
                `<select class="form-control col-sm-12" id="GioiTinh' + i +'" name="GioiTinh` + i + `">` +
                `<option value="">Giới tính</option>` +
                `<option value="Nam">Nam</option>` +
                `<option value="Nữ">Nữ</option>` +
                `</select>` +
                `</div>` +
                ` <div class="group-info-birthday col-sm-2">` +
                `<span>Ngày sinh</span>` +

                `<input class="form-control text-box single-line" required="required" name="NgaySinh` + i + `" id="NgaySinh' + i +'" placeholder="Vui lòng nhập chọn ngày sinh"type="date" value="">` +

                `</div>` +
                `<div class="group-info-note col-sm-11">` +
                ` <span>Lưu ý</span>` +
                `<input class="form-control" name="LuuY` + i + `" id="LuuY' + i +'" placeholder="Nhập lưu ý" type="text" value="">` +

                `</div>` +

                ` </div>` +

                ` </div>` +
                ` </div> `;

            var div = document.getElementById("datve");
            div.innerHTML += row;
            console.log(i);
            document.getElementById("venguoilon").innerHTML = i;
            document.getElementById("soluongdat").value = i;
        };
    }
    function xoaVe() {
        var element = document.getElementById("datve");
        if (i > 0) {
            document.getElementById('nd' + i).remove();
            i--;

        }
        document.getElementById("venguoilon").innerHTML = i;
        document.getElementById("soluongdat").value = i;

       
       
    }
    
</script>